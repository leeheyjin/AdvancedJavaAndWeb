<?xml version="1.0" encoding="UTF-8"?>
<!-- 이 문서는 mybatis에서 처리할 SQL문을 작성하는 문서입니다. -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
							"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
	<!-- 동적쿼리 -->
	<sql id="dynamicCondition">
		<where>
			<if test="!(stype == '' or sword == '')">
				${STYPE} LIKE '%'||#{SWORD}||'%'
			</if>
		</where>
	</sql>

	<!-- 페이지별 리스트 가져오기 -->
	<select id="listPerPage" resultType="boardVO" parameterType="Map">
		SELECT A.* FROM (
			SELECT ROWNUM AS RNUM , B.* FROM (
				SELECT * FROM BOARDTAB <include refid="dynamicCondition"/> ORDER BY NUM DESC ) B 
    <!--CDATA: where에 <가 문자로 인식되게함 -->
    <![CDATA[ 
			WHERE ROWNUM <= #END#) A
       WHERE A.RNUM >= #START# 
     ]]>
	</select>
	
	<!-- 전체 글 개수 구하기 -->
	<select id="totalCount" resultType="int" parameterType="Map">
		SELECT COUNT(*) FROM BOARDTAB <include refid="dynamicCondition"/>
	</select>
	
	<!-- 조회수 증가하기 -->
	<!-- 글쓰기(저장하기) -->
	<!-- 글 수정하기 -->
	<!-- 페이지 정보 얻기 -->
	
	<!-- 댓글쓰기 -->
	<!-- 댓글 수정 -->
	<!-- 댓글 삭제 -->
	<!-- 댓글 리스트 -->
</mapper>