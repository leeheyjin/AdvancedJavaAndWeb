<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/0502.css">
<style type="text/css">
#result1 {
	background-color: yellow;
}
</style>
</head>
<body>
	<div class="box">
		<h2>
			setTimeout(function(){}, millisec)<br>지정된 밀리초 경과 후 function()을
			실행한다
		</h2>
		<input type="button" onclick="proc1()" value="확인">
		<div id="result1" class="result"></div>
	</div>
	<div class="box">
		<h2>
			setInterval(function(){}, millisec)<br>지정된 밀리초 경과할 때마다
			function()을 실행한다<br>function()을 종료하려면 clearInterval(id변수)를 호출한다
		</h2>
		<input type="button" onclick="proc2()" value="확인" id="confirm">
		<input type="button" value="종료" onclick="stop()">
		<div id="result2" class="result"></div>
	</div>

	<script type="text/javascript">
		proc1 = () => {
			setTimeout(() => {
				// result1로 접근검색
				vres = document.querySelector("#result1");
				vres.style.backgroundColor = "pink";
			}, 500);
		}
		
		vid = null;
		proc2 = () => {
			   
		    // 확인버튼 클릭 시 실행되는 함수
		    // 확인 버튼을 안 보이도록 설정 display : "none"
		    document.querySelector("#confirm").style.display = "none";
		   
		  /*  vid = setInterval( () => {
		       
		      // result2으로 접근 검색
		      vres = document.querySelector('#result2');
		      
		      cr = parseInt(Math.random() * 256); // 0~255
		      cg = parseInt(Math.random() * 256); // 0~255
		      cb = parseInt(Math.random() * 256); // 0~255
		      
		      // 버튼 클릭할 때마다 0.5초 후에 배경색을 변경                     
		      vres.style.backgroundColor = `rgb(${cr},${cg},${cb})`;

		      console.log(vid);
		      
		   }, 500);*/
		   
		    vid = setTimeout( function run() {
		    // result2으로 접근 검색
		   vres = document.querySelector('#result2');
		   
		   cr = parseInt(Math.random() * 256); // 0~255
		   cg = parseInt(Math.random() * 256); // 0~255
		   cb = parseInt(Math.random() * 256); // 0~255
		   
		   // 16진수로 변경
		   cr16 = cr.toString(16)
		   cg16 = cg.toString(16)
		   cb16 = cb.toString(16)
		   
		   // 버튼 클릭할 때마다 0.5초 후에 배경색을 변경                     
//		   vres.style.backgroundColor = `rgb(${cr},${cg},${cb})`;
		   vres.style.backgroundColor =	"#" + cr16 + cg16 + cb16;

		   //console.log(vid);
		    vid = setTimeout(run, 500); // delay 보장
		}, 500);
		}

		stop = () => {
		   // 종료버튼 클릭 시 실행 되는 함수
		   // 확인 버튼을 다시 나타나도록 설정
		   // display : "block" 줄바뀜, display : "inline" 줄바뀜x
		    document.querySelector("#confirm").style.display = "inline";
		   
		//   clearInterval(vid);
		   clearTimeout(vid);
		   
		}
	</script>
</body>
</html>